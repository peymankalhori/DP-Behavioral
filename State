from abc import ABC, abstractmethod

# Ø§ÛŒÙ†ØªØ±ÙÛŒØ³ Ø­Ø§Ù„Øª (State)
class ElevatorState(ABC):
    @abstractmethod
    def handle_request(self, context, requested_floor):
        pass

# Context Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ú©Ù‡ Ø­Ø§Ù„Øª ÙØ¹Ù„ÛŒ Ø±Ùˆ Ù†Ú¯Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø±Ù‡
class Elevator:
    def __init__(self, max_floor):
        self.max_floor = max_floor
        self.min_floor = 0
        self.current_floor = 0
        self.state = IdleState()

    def set_state(self, state):
        self.state = state

    def request_floor(self, floor):
        if floor < self.min_floor or floor > self.max_floor:
            print(f"âŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø·Ø¨Ù‚Ù‡ {floor} Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª!")
            return
        self.state.handle_request(self, floor)

# Ø­Ø§Ù„Øª Idle (Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø¯Ø± Ø­Ø§Ù„Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ù‡ Ú©Ø§Ø± Ø§Ø³Øª)
class IdleState(ElevatorState):
    def handle_request(self, context, requested_floor):
        print(f"ğŸšª Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªØŒ Ø­Ø±Ú©Øª Ø¨Ù‡ Ø·Ø¨Ù‚Ù‡ {requested_floor}")
        if requested_floor > context.current_floor:
            context.set_state(MovingUpState())
        elif requested_floor < context.current_floor:
            context.set_state(MovingDownState())
        else:
            print("Ø´Ù…Ø§ Ù‡Ù…â€ŒØ§Ú©Ù†ÙˆÙ† Ø¯Ø± Ø·Ø¨Ù‚Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ù‡Ø³ØªÛŒØ¯.")
            return
        context.state.handle_request(context, requested_floor)

# Ø­Ø§Ù„Øª Ø­Ø±Ú©Øª Ø¨Ù‡ Ø³Ù…Øª Ø¨Ø§Ù„Ø§
class MovingUpState(ElevatorState):
    def handle_request(self, context, requested_floor):
        while context.current_floor < requested_floor:
            context.current_floor += 1
            print(f"â¬†ï¸ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø¨Ù‡ Ø·Ø¨Ù‚Ù‡ {context.current_floor} Ø±Ø³ÛŒØ¯")
            if context.current_floor == context.max_floor:
                print("âš ï¸ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø·Ø¨Ù‚Ù‡ØŒ ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª Ø¨Ù‡ Idle")
                context.set_state(IdleState())
                return
        print("ğŸšª Ø¢Ø³Ø§Ù†Ø³ÙˆØ± ØªÙˆÙ‚Ù Ú©Ø±Ø¯")
        context.set_state(IdleState())

# Ø­Ø§Ù„Øª Ø­Ø±Ú©Øª Ø¨Ù‡ Ø³Ù…Øª Ù¾Ø§ÛŒÛŒÙ†
class MovingDownState(ElevatorState):
    def handle_request(self, context, requested_floor):
        while context.current_floor > requested_floor:
            context.current_floor -= 1
            print(f"â¬‡ï¸ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø¨Ù‡ Ø·Ø¨Ù‚Ù‡ {context.current_floor} Ø±Ø³ÛŒØ¯")
            if context.current_floor == context.min_floor:
                print("âš ï¸ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ±ÛŒÙ† Ø·Ø¨Ù‚Ù‡ØŒ ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª Ø¨Ù‡ Idle")
                context.set_state(IdleState())
                return
        print("ğŸšª Ø¢Ø³Ø§Ù†Ø³ÙˆØ± ØªÙˆÙ‚Ù Ú©Ø±Ø¯")
        context.set_state(IdleState())

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¢Ø³Ø§Ù†Ø³ÙˆØ±
if __name__ == "__main__":
    elevator = Elevator(max_floor=10)

    elevator.request_floor(5)
    elevator.request_floor(8)
    elevator.request_floor(2)
    elevator.request_floor(11)  # Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª
    elevator.request_floor(0)
